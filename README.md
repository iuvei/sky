# 前端 h5 项目

## 下载依赖包

```sh
npm install
```

## Development

```sh
npm run dev
```

Will load `config/dev.js` as config file.

```sh
npm run local
```

Will load `config/local.js`, it's an alias of

```sh
npm run dev --config=local
```

## Build

```sh
npm run build
```

## 注意

### 新增加了 serviceWorker，会导致以下问题

1. 只有 production，build 版本 serviceWorker 才会起作用
2. 如果部署测试后，改了问题重新编译后发现没有生效，是因为 SW 生成插件没有被更改，这时候可以：

- 改动 `plugin/sw.js`里的 `getTemplate2` 模板字符串
- 改动 `config/edition.json` 里的 `edition` 版本号

* 建议改动第一点

### eslint 规则相关

1. 在 package.json 中新添加了 lint 命令,用于进行 eslint 检查
2. 如果 lint 无法运行，则需要 npm i eslint,babel-eslint,eslint-plugin-html 等插件至最新版本
3. 具体校验规则在 .eslintrc 中，请自行增减规则

### VSCODE 必装插件

1. GitLens
2. Prettier
3. Chinese （Simplified) Language Pack
4. ESLint
5. JavaScript (ES6) code snippets
6. Settings Sync
7. Vetur

### VSCODE 插件配置

```json
{
  "prettier.tabWidth": 2,
  "prettier.eslintIntegration": true,
  "editor.tabSize": 2,
  "eslint.autoFixOnSave": true,
  "editor.formatOnSave": true,
  "vetur.format.defaultFormatter.html": "js-beautify-html",
  "vetur.validation.template": false,
  "eslint.enable": true, //Enable eslint
  "eslint.options": {
    "extensions": [
      //List of file extensions to activate eslint
      ".html",
      ".js",
      ".vue",
      ".jsx"
    ]
  },
  "eslint.validate": [
    {
      "language": "html",
      "autoFix": true
    },
    {
      "language": "vue",
      "autoFix": true //Autofix any fixable errors when linting
    },
    {
      "language": "javascript",
      "autoFix": true //Autofix any fixable errors when linting
    },
    {
      "language": "javascriptreact",
      "autoFix": true //Autofix any fixable errors when linting
    }
  ],
  "vetur.format.defaultFormatterOptions": {
    "js-beautify-html": {
      // vue 模板格式化设置
      "wrap_attributes": "force-aligned" // 可以换成上面任意一种value
    },
    "prettyhtml": {
      "printWidth": 100,
      "singleQuote": false
    }
  },
  "files.eol": "\n" // 行结束符设置
}
```
### V1.3.3.4
1. 返水区间加入万亿单位
2. 修改首页tab标题体育为皇冠体育
3. 修改新注册用户名密码匹配规则
### V1.3.3.3
1. 去掉充值判断是否绑定银行卡逻辑
### V1.3.3.2
1. 充值判断银行bug
2. 添加竞彩足球入口和注单显示
3. 代理报表添加不同平台金额字段
4. 兼容提款接口返回null
### V1.3.3.1
1. 维护页面客服地址取值bug
### V1.3.3.0
1. 充值页面加入是否绑定银行卡判断
2. 无法正常进入维护状态bug

### V1.3.2.9
1. 六合彩生肖跨年数据计算

### V1.3.2.8
1. 电子游戏加入区分平台角标
2. 充值记录类型选择bug
3. 聊天加入提示语

### V1.3.2.7

1. 首页彩票路由指向 bug

### V1.3.2.6

1. 聊天室未正确隐藏

### V1.3.2.5

1. 修复请求头被覆盖 bug

### V1.3.2.4

1. 修改聊天室 bug

### V1.3.2.3

1. 添加聊天室功能
2. 首页可拖动红包 bug
3. 六合彩连码赔率显示 bug

### V1.3.2.2

1. 维护页客服地址取维护信心 service_url

### V1.3.2.1

1. 电子游戏强制刷新金额 bug

### V1.3.2.0

1. 系统公告添加 html 标签兼容
2. 客服地址过滤转义字符
3. 维护页客服地址跳转
4. 抢红包 safari 样式兼容

### V1.3.1.9

1. 代理投注详情显示未中奖 bug
2. 适配 ipad
3. 密码为 q12we34r 无需验证码

### V1.3.1.8

1. 修复 11 选五双面无法选择的问题
2. 加入最新拼接客服地址
3. 拦截试玩账号进入电子游戏

### V1.3.1.7

1. 六合彩连码限制最多 10 个选球

### V1.3.1.6

1. 抢红包加入可拖动
2. 足彩投注记录详情图标修改

### V1.3.1.5

1. 购彩大厅移除 MG
2. 用户登录添加.字符

### V1.3.1.4

1. 修复投注记录切换头部彩票和电子游戏时再退出进入未初始化的问题
2. 修复投注记录跳到投注页再后退与其他端展示不一致显示问题
3. 开放抢红包活动
4. 过长数组解压报错 bug
5. 修复投注记录切换足彩切换投注状态并进入其他页面再进入投注记录足彩投注状态未初始化的问题
6. 安全中心添加银行卡前端手动插入数据
7. pk10 和 11X5 默认为定位胆
8. 修改分分六合彩生肖直选>特肖 号码溢出盒子

### V1.3.1.3

1. 扫码充值个人入款账户加入昵称字段显示

### V1.3.1.2

1. 体彩冠军页面样式调整
2. 连选必中预计中奖金额显示 bug
3. 加入主题色样式变量
4. 三星手机自带浏览器全屏页面成长信息页面无法滑动 bug

### V1.3.1.1

1. 11x5 二星组选胆拖注数计算 bug
2. 体彩加入篮球
3. 加入今日盈亏功能，修改选择日期 bug
4. 用户晋级活动接口修改

### V1.3.1.0

1. 加入今日盈亏功能

### V1.3.0.9

1. 等级奖励中彩金显示成长值 bug

### V1.3.0.8

1. 活动详情压缩解密兼容算法

### V1.3.0.7

1. 优化用户提款处理逻辑，提款银行卡为 0 时默认选择已绑定银行卡第一条信息
1. 优化提示购物车有投注信息弹窗时可以点击头部信息逻辑

### V1.3.0.6

1. 投注后跳转选球页赔率未初始化
1. 购物车已选注数大于 99 时图标显示 99+
1. 六合彩玩法选球限制 bug
1. 购物车下注后默认追号不重置 bug
1. 投注页头部 bug 更改
1. 手动刷新金额加入'{click: 1}'参数

### V1.3.0.5

1. pcdd、k3 下注确认弹窗不应该有详情 bug
2. 时时彩随机一注无赔率 bug
3. 合肖赔率显示 bug

### V1.3.0.4

4. 首页热门彩种加入电子游戏
5. 头部 bug 更改 80%
6. 六合彩合肖注数计算错误
7. 确认购彩弹窗是否显示购彩详情优化

### V1.3.0.3

8. 屏蔽优惠管理入口
9. 提款加入请求失败处理
10. 电子游戏结算逻辑判断
11. 优化客服地址转义字符替换

### V1.3.0.2

12. 加入 IP 访问限制页面
13. 补充漏掉的等级奖励返回路由
14. 修复电子游戏投注记录混入彩票记录
15. 修改 IP 限制页面的图标
16. 彩种列表加个跳动图标
17. 电子游戏维护判断

### V1.3.0.1

18. 修改用户等级 bug
19. 公司入款订单号加复制按钮

### V1.2.0.9

20. 添加时时返水
21. 添加电子游戏
22. 农场走势 bug 修改

### V1.2.0.8

23. 修复切换彩种时头部不对的问题
24. 七星彩双面玩法 UI 调整
25. 修复六合彩五尾没有 35 号码的问题
26. 推广链接优化

###V1.2.0.7

1. 修改充值可选时间跨月 bug

### V1.2.0.6

1. 扑克换图
2. 加入 vip 等级
3. 牛牛 bug 修复
4. 扑克任选四注数计算

### V1.2.0.5

无用版本号

### V1.2.0.4

1. 修复生产包还能进行 vue 调试的问题
2. 修复购彩头部投完一注后头部显示 双面玩法显示了官方玩法的子菜单的问题

### V1.2.0.3

1. 全部彩种加入电子游戏修改样式
2. 七星彩、扑克加入滚球
3. 走势由彩种进入 bug
4. 修改银行卡账号明文显示

### V1.2.0.2

1. 随机一注 gameid 可能为字符串 bug
2. 新彩种归入其他彩种分类
3. 屏蔽路纸图
4. 投注详情期数过长换行
5. 下级开户设置新彩种返点

### V1.2.0.1

1. 修改新彩种一键投注 bug
2. 修改无历史开奖数据 bug
3. 修改购彩详情显示开奖原始数据 bug
4. 修改扑克七星彩购物车直接返回首页 bug

### V1.2.0.0

1.加入五个新彩种

### V1.1.0.8

1. 系统公告超出
2. fan 加入奇怪 meta 标签
3. 现金交易默认显示 bug

### V1.1.0.7

1. 时时彩单式显示 bug
2. 其他彩种归属

### V1.1.0.6

1. 快三重复滚球
2. 追号智能追号选定期数与生成方案起始期数不一致
3. 双面玩法切换需要双击 bug

### V1.1.0.5

1. 全部彩种加入 isHome 字段
2. 开奖大厅去投一注加入缺少字段
3. 应后端要求提款投注量去掉前端判断

### V1.1.0.4

1. 修复其他彩种没有双面玩法的问题
2. 修复注册没有邀请码提示框却提示需要输入邀请码的问题

### V1.1.0.3

1. 走势去投一注跳转彩种问题

### V1.1.0.1

1. 走势去投一注 bug
2. 投注记录去投一注 bug

### V1.1.0.0

1. 玩法配置请求重复问题
2. 首次进入彩种未请求历史开奖记录问题
3. 赔率只保留两位小数问题
4. 较大版本更改

### V1.0.3.44

1.  加入新版智能追号
2.  加入新版六合彩界面
3.  加入电子游戏
4.  充值加入字段判断 https
5.  其他已经问题修改

### V1.0.3.43

1.  新版官方玩法 UI
2.  追号添加平倍追号和翻倍追号
3.  接入后台设置默认玩法

### V1.0.3.42

1.  修复追号期数为 0 会报错的问题
2.  会员等级新版 UI
3.  修复足彩切换玩法报错问题

### V1.0.3.41

1.  无用版本

### V1.0.3.40

1.  修复足彩点击不展开本行 bug
2.  修复解绑银行卡密码缓存问题
3.  改变充值结构，修复充值页面跳转逻辑混乱问题
4.  加入刷新用户余额缓存

### V1.0.3.39

1.  修复确认下注弹窗时可以切换玩法的问题
2.  修复下注金额重复计算问题
3.  余额用完提交数据按钮不恢复问题
4.  修复安卓系统后退键返回购彩页面购物车未清空问题
5.  修复追号下注下注金额与余额相同不显示购彩成功问题
6.  修复六合彩切换玩法注数未初始化问题
7.  修复投注详情再来一注玩法说明未变化问题
8.  修复公司入款无账号也会请求数据问题

### V1.0.3.38

1.  修复 PCDD 历史开奖结果显示问题
2.  修复跳期弹框每次换彩种时都显示的问题
3.  删除首页无用脚本引用

### V1.0.3.37

1.  解决微信支付无法在后台生成订单的问题
2.  解决下注时倒计时结束无法跳期的问题

### V1.0.3.36

1.  修复直营业主注册提示邀请码错误的问题

### V1.0.3.35

1.  修复扫码支付显示问题
2.  添加扫码支付点击支付按钮唤起微信 QQ 和支付宝功能
3.  注册页添加邀请码前端验证
4.  修改投注详情样式
5.  修复开奖倒计时有时候不走的问题
6.  更改投注页面底部部分图标
7.  修复银联充值通道关闭时一直显示 loading 的问题

### V1.0.3.34

1.  添加部分 PWA 支持
2.  添加 favicon
3.  购物车智能追号添加输入框获取焦点不弹出小键盘功能
4.  修复香港六合彩长时间滚球发送过多请求问题和离开滚球页面后定时器无法清除的问题
5.  修改足彩样式

### V1.0.3.33

1.  添加第三方支付 is_socket=2 时的处理逻辑

### V1.0.3.32

1.  修复 11 选 5 双面盘和龙虎斗错误

### V1.0.3.31

1.  拉出本地分支测试删除验证码

### V1.0.3.30

1.  注册时添加域名参数

### V1.0.3.29

1.  修复购物车跳期问题
2.  修复购物车单价输入问题
3.  修复代理中心使用新 UI 问题

### V1.0.3.28

1.  修复香港六合彩有一键投注按钮
2.  修复购物车倒计时计数两期后就显示封盘不显示倒计时的问题
3.  修复滚球时请求开奖结果接口过多次的问题
4.  修复购物车显示单价问题

### V1.0.3.27

1.  第三方支付 websocket 正式版
2.  下注余额下注后实时更新

### V1.0.3.26

1.  修复部分第三方支付无法支付的问题
2.  修复首页 APP 下载不显示的问题

### V1.0.3.25

1.  修复首页嘉奖背景图过大的问题
2.  修复 safari 未登录下注跳转登陆页无法显示的问题
3.  修改未登录下注弹出提示框样式
4.  修改第三方入款部分通道连接代码
5.  添加邀请码本地持久化处理
6.  修改默认字体，使其在 safari 上显示更友好
7.  修复快三和 11 选 5 交叉投注时页面报错的问题

## License

[MIT](http://opensource.org/licenses/MIT)

Copyright (c) 2016 sky
